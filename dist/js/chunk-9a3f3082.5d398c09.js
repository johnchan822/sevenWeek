(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a3f3082"],{6506:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container"},n={class:"table align-middle"},i=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",null,"圖片"),Object(o["h"])("th",null,"商品名稱"),Object(o["h"])("th",null,"價格"),Object(o["h"])("th"),Object(o["h"])("th")])],-1),d={style:{width:"200px"}},l={key:0,class:"h5"},s={key:1,class:"h6"},r={key:2,class:"h5"},u={class:"btn-group btn-group-sm"},b={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},h=Object(o["h"])("span",{class:"visually-hidden"},"Loading...",-1),p=Object(o["g"])(" 查看更多 "),j={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},O=Object(o["h"])("span",{class:"visually-hidden"},"Loading...",-1),g=Object(o["g"])(" 加到購物車 "),m=Object(o["g"])(" 進入單一頁面 ");function f(t,e,c,f,v,y){var k=Object(o["A"])("Loading"),w=Object(o["A"])("router-link"),C=Object(o["A"])("modal");return Object(o["t"])(),Object(o["e"])(o["a"],null,[Object(o["h"])("div",a,[Object(o["h"])(k,{active:v.isLoading},null,8,["active"]),Object(o["h"])("table",n,[i,Object(o["h"])("tbody",null,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(v.products,(function(e){return Object(o["t"])(),Object(o["e"])("tr",{key:e.id},[Object(o["h"])("td",d,[Object(o["h"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{"background-image":"url(".concat(e.imageUrl,")")}]},null,4)]),Object(o["h"])("td",null,Object(o["D"])(e.title),1),Object(o["h"])("td",null,[e.price?Object(o["f"])("",!0):(Object(o["t"])(),Object(o["e"])("div",l,Object(o["D"])(e.origin_price)+" 元",1)),e.price?(Object(o["t"])(),Object(o["e"])("del",s,"原價 "+Object(o["D"])(e.origin_price)+" 元",1)):Object(o["f"])("",!0),e.price?(Object(o["t"])(),Object(o["e"])("div",r,"現在只要 "+Object(o["D"])(e.price)+" 元",1)):Object(o["f"])("",!0)]),Object(o["h"])("td",null,[Object(o["h"])("div",u,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary",disabled:t.loadingStatus===e.id,onClick:function(t){return y.openModal(e)}},[t.loadingStatus===e.id?(Object(o["t"])(),Object(o["e"])("div",b,[h])):Object(o["f"])("",!0),p],8,["disabled","onClick"]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger",disabled:t.loadingStatus===e.id,onClick:function(t){return y.addCart(e)}},[t.loadingStatus===e.id?(Object(o["t"])(),Object(o["e"])("div",j,[O])):Object(o["f"])("",!0),g],8,["disabled","onClick"]),Object(o["h"])(w,{type:"button",class:"btn btn-outline-primary",to:"/product/".concat(e.id)},{default:Object(o["L"])((function(){return[m]})),_:2},1032,["to"])])])])})),128))])])]),Object(o["h"])(C,{ref:"modal",product:v.product,onEmitAddCart:y.addCart},null,8,["product","onEmitAddCart"])],64)}c("99af"),c("ac1f"),c("5319"),c("a4d3"),c("e01a");var v={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},y={class:"modal-dialog modal-xl",role:"document"},k={class:"modal-content border-0"},w=Object(o["h"])("div",{class:"modal-header bg-dark text-white"},[Object(o["h"])("h5",{class:"modal-title",id:"exampleModalLabel"}),Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},M={class:"row"},$={class:"col-sm-6"},x={class:"col-sm-6"},L={class:"badge bg-primary rounded-pill"},S={key:0,class:"h6"},D={key:1,class:"h5"},A={class:"input-group"};function q(t,e,c,a,n,i){return Object(o["t"])(),Object(o["e"])("div",v,[Object(o["h"])("div",y,[Object(o["h"])("div",k,[w,Object(o["h"])("div",C,[Object(o["h"])("div",M,[Object(o["h"])("div",$,[Object(o["h"])("img",{class:"img-fluid",src:c.product.imageUrl,alt:""},null,8,["src"])]),Object(o["h"])("div",x,[Object(o["h"])("span",L,Object(o["D"])(),1),Object(o["h"])("p",null,"商品描述："+Object(o["D"])(c.product.description),1),Object(o["h"])("p",null,"商品內容："+Object(o["D"])(c.product.content),1),c.product.price?(Object(o["t"])(),Object(o["e"])("del",S,"原價 "+Object(o["D"])(c.product.origin_price)+" 元",1)):Object(o["f"])("",!0),c.product.price?(Object(o["t"])(),Object(o["e"])("div",D,"現在只要 "+Object(o["D"])(c.product.price)+" 元",1)):Object(o["f"])("",!0),Object(o["h"])("div",null,[Object(o["h"])("div",A,[Object(o["M"])(Object(o["h"])("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.qty=t})},null,512),[[o["H"],n.qty,void 0,{number:!0}]]),Object(o["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(){return i.addCartModal&&i.addCartModal.apply(i,arguments)}),disabled:t.loadingStatus===c.product.id},"加入購物車",8,["disabled"])])])])])])])])],512)}var _=c("7c2b"),P=c.n(_),U={props:["product"],data:function(){return{modal:" ",tempProduct:{},qty:1}},watch:{product:function(){this.tempProduct=this.product}},mounted:function(){this.modal=new P.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},addCartModal:function(){this.$emit("emit-addCart",this.tempProduct,this.qty)},closeModal:function(){this.modal.hide()}}};U.render=q;var z=U,E={components:{modal:z},data:function(){return{products:[],carts:{},product:{},isLoading:!1}},methods:{getData:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/products");this.$http.get(e).then((function(e){console.log(e),t.products=e.data.products,t.isLoading=!1}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var o={product_id:t.id,qty:c},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/cart");this.$http.post(a,{data:o}).then((function(t){console.log(t),!0===t.data.success?(e.$httpMessageState(t,"訂單加入"),e.$refs.modal.closeModal(),e.isLoading=!1):e.$httpMessageState(t,"訂單加入")}))},openModal:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/product/").concat(t.id);this.$http.get(c).then((function(t){e.product=t.data.product,e.$refs.modal.openModal(),e.isLoading=!1}))}},created:function(){this.getData()},mounted:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization="".concat(t)}};E.render=f;e["default"]=E},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),i=c("5135"),d=c("861d"),l=c("9bf2").f,s=c("e893"),r=n.Symbol;if(a&&"function"==typeof r&&(!("description"in r.prototype)||void 0!==r().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new r(t):void 0===t?r():r(t);return""===t&&(u[e]=!0),e};s(b,r);var h=b.prototype=r.prototype;h.constructor=b;var p=h.toString,j="Symbol(test)"==String(r("test")),O=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var t=d(this)?this.valueOf():this,e=p.call(t);if(i(u,t))return"";var c=j?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-9a3f3082.5d398c09.js.map