(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-503f125e"],{"159b":function(t,e,c){var o=c("da84"),a=c("fdbc"),n=c("17c2"),r=c("9112");for(var i in a){var l=o[i],s=l&&l.prototype;if(s&&s.forEach!==n)try{r(s,"forEach",n)}catch(d){s.forEach=n}}},1799:function(t,e,c){"use strict";var o=c("7a23"),a={class:"container d-flex justify-content-center mt-5"},n={"aria-label":"Page navigation example"},r={class:"pagination"},i=Object(o["h"])("span",{"aria-hidden":"true"},"«",-1),l=Object(o["h"])("span",{"aria-hidden":"true"},"»",-1);function s(t,e,c,s,d,u){return Object(o["t"])(),Object(o["e"])("div",a,[Object(o["h"])("nav",n,[Object(o["h"])("ul",r,[Object(o["h"])("li",{class:["page-item",{disabled:!c.page.has_pre}]},[Object(o["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(o["N"])((function(e){return t.$emit("emit-page",c.page.current_page-1)}),["prevent"]))},[i])],2),(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(c.page.total_pages,(function(e){return Object(o["t"])(),Object(o["e"])("li",{class:["page-item",{active:e===c.page.current_page}],key:e},[Object(o["h"])("a",{class:"page-link",href:"#",onClick:Object(o["N"])((function(c){return t.$emit("emit-page",e)}),["prevent"])},Object(o["D"])(e),9,["onClick"])],2)})),128)),Object(o["h"])("li",{class:["page-item",{disabled:!c.page.has_next}]},[Object(o["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(o["N"])((function(e){return t.$emit("emit-page",c.page.current_page+1)}),["prevent"]))},[l])],2)])])])}var d={props:["page"]};d.render=s;e["a"]=d},"17c2":function(t,e,c){"use strict";var o=c("b727").forEach,a=c("a640"),n=a("forEach");t.exports=n?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"4de4":function(t,e,c){"use strict";var o=c("23e7"),a=c("b727").filter,n=c("1dde"),r=n("filter");o({target:"Array",proto:!0,forced:!r},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function o(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function a(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,o)}return c}function n(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?a(Object(c),!0).forEach((function(e){o(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},"6ff1":function(t,e,c){"use strict";var o=c("7a23"),a={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},n={class:"modal-dialog"},r={class:"modal-content border-0"},i=Object(o["h"])("div",{class:"modal-header bg-danger text-white"},[Object(o["h"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["h"])("span",null,"刪除產品")]),Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),l={class:"modal-body"},s=Object(o["g"])(" 是否刪除 "),d={key:0,class:"text-danger"},u=Object(o["g"])(" 商品(刪除後將無法恢復)。 "),b={class:"modal-footer"},p=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function h(t,e,c,h,m,f){return Object(o["t"])(),Object(o["e"])("div",a,[Object(o["h"])("div",n,[Object(o["h"])("div",r,[i,Object(o["h"])("div",l,[s,c.tempProduct.title?(Object(o["t"])(),Object(o["e"])("strong",d,Object(o["D"])(c.tempProduct.title),1)):Object(o["f"])("",!0),u]),Object(o["h"])("div",b,[p,Object(o["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(t){return f.productDel(c.tempProduct)})}," 確認刪除 ")])])])],512)}var m=c("e0ae"),f={data:function(){return{delModal:""}},props:["tempProduct"],methods:{productDel:function(t){this.$emit("emit-del-product",t)}},mixins:[m["a"]]};f.render=h;e["a"]=f},b64b:function(t,e,c){var o=c("23e7"),a=c("7b0b"),n=c("df75"),r=c("d039"),i=r((function(){n(1)}));o({target:"Object",stat:!0,forced:i},{keys:function(t){return n(a(t))}})},dbb4:function(t,e,c){var o=c("23e7"),a=c("83ab"),n=c("56ef"),r=c("fc6a"),i=c("06cf"),l=c("8418");o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,c,o=r(t),a=i.f,s=n(o),d={},u=0;while(s.length>u)c=a(o,e=s[u++]),void 0!==c&&l(d,e,c);return d}})},dc0d:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container"},n={class:"text-end mt-4"},r={class:"table mt-4"},i=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",{width:"120"}," 分類 "),Object(o["h"])("th",null,"產品名稱"),Object(o["h"])("th",{width:"120"}," 原價 "),Object(o["h"])("th",{width:"120"}," 售價 "),Object(o["h"])("th",{width:"100"}," 是否啟用 "),Object(o["h"])("th",{width:"120"}," 編輯 ")])],-1),l={class:"text-end"},s={class:"text-end"},d={key:0,class:"text-success"},u={key:1},b={class:"btn-group"};function p(t,e,c,p,h,m){var f=Object(o["A"])("Loading"),O=Object(o["A"])("add-modal"),j=Object(o["A"])("del-modal"),g=Object(o["A"])("pagination");return Object(o["t"])(),Object(o["e"])(o["a"],null,[Object(o["h"])(f,{active:h.isLoading},null,8,["active"]),Object(o["h"])("div",a,[Object(o["h"])("div",n,[Object(o["h"])("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=function(t){return m.openModal("new")})}," 建立新的產品 ")]),Object(o["h"])("table",r,[i,Object(o["h"])("tbody",null,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(h.products,(function(t,e){return Object(o["t"])(),Object(o["e"])("tr",{key:t+e},[Object(o["h"])("td",null,Object(o["D"])(t.category),1),Object(o["h"])("td",null,Object(o["D"])(t.title),1),Object(o["h"])("td",l,Object(o["D"])(t.origin_price),1),Object(o["h"])("td",s,Object(o["D"])(t.price),1),Object(o["h"])("td",null,[1==t.is_enabled?(Object(o["t"])(),Object(o["e"])("span",d,"啟用")):(Object(o["t"])(),Object(o["e"])("span",u,"未啟用"))]),Object(o["h"])("td",null,[Object(o["h"])("div",b,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return m.openModal("edit",t)}}," 編輯 ",8,["onClick"]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return m.openModal("del",t)}}," 刪除 ",8,["onClick"])])])])})),128))])])]),Object(o["h"])(O,{ref:"addModal","temp-products":h.tempProduct,"is-new":h.isNew,onEmitUpdate:m.productStates},null,8,["temp-products","is-new","onEmitUpdate"]),Object(o["h"])(j,{ref:"delModal","temp-product":h.tempProduct,onEmitDelProduct:m.delProduct},null,8,["temp-product","onEmitDelProduct"]),Object(o["h"])(g,{page:h.pagination,onEmitPage:m.getData},null,8,["page","onEmitPage"])],64)}var h=c("5530"),m=(c("99af"),c("1799")),f=c("6ff1"),O=(c("a434"),c("a4d3"),c("e01a"),{id:"productModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),j={class:"modal-dialog modal-xl"},g={class:"modal-content border-0"},v={class:"modal-header bg-dark text-white"},y={key:0,id:"productModalLabel",class:"modal-title"},P=Object(o["h"])("span",null,"新增產品",-1),w={key:1,id:"productModalLabel",class:"modal-title"},M=Object(o["h"])("span",null,"編輯產品",-1),k=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body"},x={class:"row"},D={class:"col-sm-4"},$={class:"mb-1"},C={class:"form-group"},L=Object(o["h"])("label",{for:"imageUrl"},"輸入圖片網址",-1),_={class:"mb-3"},E={for:"customFile",class:"form-label"},S=Object(o["g"])("或上傳圖片 "),N={key:0,class:"fas fa-spinner fa-spin"},V={key:0,class:"mt-5"},H={key:0},A={class:"col-sm-8"},F={class:"form-group"},I=Object(o["h"])("label",{for:"title"},"標題",-1),J={class:"row"},G={class:"form-group col-md-6"},T=Object(o["h"])("label",{for:"category"},"分類",-1),q={class:"form-group col-md-6"},z=Object(o["h"])("label",{for:"price"},"單位",-1),B={class:"row"},K={class:"form-group col-md-6"},Q=Object(o["h"])("label",{for:"origin_price"},"原價",-1),R={class:"form-group col-md-6"},W=Object(o["h"])("label",{for:"price"},"售價",-1),X=Object(o["h"])("hr",null,null,-1),Y={class:"form-group"},Z=Object(o["h"])("label",{for:"description"},"產品描述",-1),tt={class:"form-group"},et=Object(o["h"])("label",{for:"content"},"說明內容",-1),ct={class:"form-group"},ot={class:"form-check"},at=Object(o["h"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),nt={class:"modal-footer"},rt=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function it(t,e,c,a,n,r){var i=Object(o["A"])("Loading");return Object(o["t"])(),Object(o["e"])("div",O,[Object(o["h"])(i,{active:n.isLoading},null,8,["active"]),Object(o["h"])("div",j,[Object(o["h"])("div",g,[Object(o["h"])("div",v,[c.isNew?(Object(o["t"])(),Object(o["e"])("h5",y,[P])):(Object(o["t"])(),Object(o["e"])("h5",w,[M])),k]),Object(o["h"])("div",U,[Object(o["h"])("div",x,[Object(o["h"])("div",D,[Object(o["h"])("div",$,[Object(o["h"])("div",C,[L,Object(o["M"])(Object(o["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.imageUrl=t})},null,512),[[o["H"],n.tempProduct.imageUrl]])]),Object(o["h"])("img",{class:"img-fluid",alt:"",src:n.tempProduct.imageUrl},null,8,["src"])]),Object(o["h"])("div",_,[Object(o["h"])("label",E,[S,n.status.fileUploading?(Object(o["t"])(),Object(o["e"])("i",N)):Object(o["f"])("",!0)]),Object(o["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return r.uploadFile&&r.uploadFile.apply(r,arguments)})},null,544)]),n.tempProduct.imagesUrl?(Object(o["t"])(),Object(o["e"])("div",V,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["t"])(),Object(o["e"])("div",{class:"mb-3",key:e},[Object(o["M"])(Object(o["h"])("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t},placeholder:"請輸入連結"},null,8,["onUpdate:modelValue"]),[[o["H"],n.tempProduct.imagesUrl[e]]]),Object(o["h"])("div",null,[Object(o["h"])("img",{class:"img-fluid",src:t},null,8,["src"])]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return n.tempProduct.imagesUrl.splice(e,1)}}," 移除 ",8,["onClick"])])})),128)),n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]||!n.tempProduct.imagesUrl.length?(Object(o["t"])(),Object(o["e"])("div",H,[Object(o["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(t){return n.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(o["f"])("",!0)])):Object(o["f"])("",!0)]),Object(o["h"])("div",A,[Object(o["h"])("div",F,[I,Object(o["M"])(Object(o["h"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.title=t})},null,512),[[o["H"],n.tempProduct.title]])]),Object(o["h"])("div",J,[Object(o["h"])("div",G,[T,Object(o["M"])(Object(o["h"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.category=t})},null,512),[[o["H"],n.tempProduct.category]])]),Object(o["h"])("div",q,[z,Object(o["M"])(Object(o["h"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.unit=t})},null,512),[[o["H"],n.tempProduct.unit]])])]),Object(o["h"])("div",B,[Object(o["h"])("div",K,[Q,Object(o["M"])(Object(o["h"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.origin_price=t})},null,512),[[o["H"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["h"])("div",R,[W,Object(o["M"])(Object(o["h"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.price=t})},null,512),[[o["H"],n.tempProduct.price,void 0,{number:!0}]])])]),X,Object(o["h"])("div",Y,[Z,Object(o["M"])(Object(o["h"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.description=t})},"\n                    ",512),[[o["H"],n.tempProduct.description]])]),Object(o["h"])("div",tt,[et,Object(o["M"])(Object(o["h"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.content=t})},"\n                    ",512),[[o["H"],n.tempProduct.content]])]),Object(o["h"])("div",ct,[Object(o["h"])("div",ot,[Object(o["M"])(Object(o["h"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.is_enabled=t})},null,512),[[o["G"],n.tempProduct.is_enabled]]),at])])])])]),Object(o["h"])("div",nt,[rt,Object(o["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=function(t){return r.update(n.tempProduct)})}," 確認 ")])])])],512)}var lt=c("e0ae"),st={data:function(){return{status:{},tempProduct:{},isLoading:!1}},inject:["emitter"],props:["tempProducts","isNew"],methods:{createImages:function(){this.tempProduct.imagesUrl=[""]},update:function(t){this.$emit("emit-update",t)},uploadFile:function(){var t=this;this.isLoading=!0;var e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/upload");this.status.fileUploading=!0,this.$http.post(o,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.isLoading=!1,t.status.fileUploading=!1,e.data.success?(t.tempProduct.imageUrl=e.data.imageUrl,t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"success",title:"圖片上傳成功",content:e.data.message})):(t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"danger",title:"圖片上傳失敗",content:e.data.message}))}))}},watch:{tempProducts:function(){this.tempProduct=this.tempProducts,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}},mixins:[lt["a"]]};st.render=it;var dt=st,ut={data:function(){return{products:[],isNew:!1,tempProduct:{imagesUrl:[]},isLoading:!1,pagination:{}}},inject:["emitter"],components:{pagination:m["a"],delModal:f["a"],addModal:dt},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){console.log(e),t.isLoading=!1,t.products=e.data.products,t.pagination=e.data.pagination}))},openModal:function(t,e){"new"===t?(this.isNew=!0,this.$refs.addModal.openModal(),this.tempProduct=Object(h["a"])({},e)):"edit"===t?(console.log(e),this.tempProduct=Object(h["a"])({},e),this.$refs.addModal.openModal(),this.isNew=!1):"del"===t&&(this.$refs.delModal.openModal(),this.tempProduct=Object(h["a"])({},e))},productStates:function(t){var e,c,o,a=this;!0===this.isNew&&(c="產品新增",e="post",o=""),!1===this.isNew&&(o="".concat(t.id),e="put",c="產品修改"),this.$http[e]("".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/product/").concat(o),{data:t}).then((function(t){console.log(t),a.isLoading=!1,a.$httpMessageState(t,c),a.$refs.addModal.closeModal(),a.getData()}))},delProduct:function(t){var e=this;console.log(t);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/product/").concat(t.id);this.$http.delete(c).then((function(t){e.$httpMessageState(t,"刪除產品"),e.$refs.delModal.closeModal(),e.getData()}))}},mounted:function(){this.getData()}};ut.render=p;e["default"]=ut},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),r=c("5135"),i=c("861d"),l=c("9bf2").f,s=c("e893"),d=n.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};s(b,d);var p=b.prototype=d.prototype;p.constructor=b;var h=p.toString,m="Symbol(test)"==String(d("test")),f=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=h.call(t);if(r(u,t))return"";var c=m?e.slice(7,-1):e.replace(f,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}},e0ae:function(t,e,c){"use strict";var o=c("7c2b"),a=c.n(o);e["a"]={methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()}},mounted:function(){this.modal=new a.a(this.$refs.modal)}}},e439:function(t,e,c){var o=c("23e7"),a=c("d039"),n=c("fc6a"),r=c("06cf").f,i=c("83ab"),l=a((function(){r(1)})),s=!i||l;o({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(t,e){return r(n(t),e)}})}}]);
//# sourceMappingURL=chunk-503f125e.12b6299d.js.map